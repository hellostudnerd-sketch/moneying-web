{% extends "base.html" %}
{% block title %}ë¦¬ì›Œë“œ - MONEYING{% endblock %}

{% block content %}

<div class="max-w-2xl mx-auto">

  <div class="mb-6">
    <a href="/my" class="text-zinc-500 hover:text-white transition text-sm">â† ë‚´ì •ë³´</a>
    <h1 class="text-2xl font-black mt-4">ğŸ ë¦¬ì›Œë“œ</h1>
    <p class="text-zinc-400 mt-1 text-sm">ì¹œêµ¬ ì´ˆëŒ€í•˜ê³ , ìˆ˜ìµ ì¸ì¦í•˜ê³ , ë¬´ë£Œ êµ¬ë… ì—°ì¥!</p>
  </div>

  <!-- ì¹œêµ¬ ì´ˆëŒ€ -->
  <div class="bg-zinc-900/60 border border-zinc-800 rounded-2xl p-5 mb-4">
    <div class="flex items-center gap-2 mb-4">
      <span class="text-xl">ğŸ‰</span>
      <span class="font-bold">ì¹œêµ¬ ì´ˆëŒ€</span>
      <span class="text-[#c4ff00] text-sm font-bold">+7ì¼</span>
    </div>
    
    <p class="text-zinc-400 text-sm mb-4">ì¹œêµ¬ê°€ ë‚´ ë§í¬ë¡œ ê°€ì…í•˜ë©´ ë‚˜ë„, ì¹œêµ¬ë„ 7ì¼ ì—°ì¥!</p>
    
    <div class="bg-black/30 rounded-xl p-4 mb-4">
      <div class="text-zinc-500 text-xs mb-1">ë‚´ ì´ˆëŒ€ ë§í¬</div>
      <div class="flex items-center justify-between gap-3">
        <code id="referralUrl" class="text-[#c4ff00] text-sm truncate">{{ request.host_url }}signup?ref={{ user.referral_code }}</code>
        <button onclick="copyReferralLink()" class="shrink-0 px-3 py-1 bg-zinc-700 hover:bg-zinc-600 rounded-lg text-xs font-bold transition">ë³µì‚¬</button>
      </div>
    </div>
    
    <div class="border-t border-zinc-800 pt-4">
      <div class="flex items-center justify-between mb-3">
        <span class="text-zinc-400 text-sm">ì´ˆëŒ€í•œ ì¹œêµ¬</span>
        <span class="font-bold text-white">{{ invited_users|length }}ëª…</span>
      </div>
      
      {% if invited_users|length > 0 %}
      <div class="space-y-2">
        {% for friend in invited_users[:5] %}
        <div class="flex items-center justify-between text-sm">
          <span class="text-zinc-400">{{ friend.email[:3] }}***{{ friend.email.split('@')[1] }}</span>
          <span class="text-zinc-500 text-xs">{{ friend.created_at.strftime('%Y-%m-%d') }}</span>
        </div>
        {% endfor %}
        {% if invited_users|length > 5 %}
        <div class="text-zinc-500 text-xs">ì™¸ {{ invited_users|length - 5 }}ëª…</div>
        {% endif %}
      </div>
      {% else %}
      <div class="text-zinc-500 text-sm">ì•„ì§ ì´ˆëŒ€í•œ ì¹œêµ¬ê°€ ì—†ì–´ìš”</div>
      {% endif %}
    </div>
  </div>

  <!-- ìˆ˜ìµ ì¸ì¦ -->
  <div class="bg-zinc-900/60 border border-zinc-800 rounded-2xl p-5 mb-4">
    <div class="flex items-center gap-2 mb-4">
      <span class="text-xl">ğŸ’¸</span>
      <span class="font-bold">ìˆ˜ìµ ì¸ì¦</span>
      <span class="text-[#c4ff00] text-sm font-bold">+7ì¼</span>
    </div>
    
    <p class="text-zinc-400 text-sm mb-4">ë¨¸ë‹ ì˜ìƒìœ¼ë¡œ ìˆ˜ìµ ë°œìƒí•˜ë©´ ì¸ì¦í•˜ê³  7ì¼ ì—°ì¥! (ì›” 1íšŒ)</p>
    
    <a href="/community/write?category=revenue" class="block w-full py-3 bg-green-500/20 text-green-400 font-bold rounded-xl text-center hover:bg-green-500/30 transition mb-4">
      ìˆ˜ìµ ì¸ì¦í•˜ê¸°
    </a>
    
    {% if revenue_posts|length > 0 %}
    <div class="border-t border-zinc-800 pt-4">
      <div class="text-zinc-500 text-xs mb-3">ë‚´ ìˆ˜ìµ ì¸ì¦ ë‚´ì—­</div>
      <div class="space-y-2">
        {% for post in revenue_posts[:5] %}
        <a href="/community/{{ post.id }}" class="flex items-center justify-between text-sm hover:bg-zinc-800/50 p-2 rounded-lg transition">
          <span class="text-white truncate flex-1">{{ post.title }}</span>
          <div class="flex items-center gap-2 shrink-0 ml-2">
            {% if post.reward_approved %}
              <span class="text-green-400 text-xs">âœ“ ìŠ¹ì¸</span>
            {% elif post.reward_requested %}
              <span class="text-yellow-400 text-xs">ëŒ€ê¸°ì¤‘</span>
            {% else %}
              <span class="text-zinc-500 text-xs">ë¯¸ì‹ ì²­</span>
            {% endif %}
            <span class="text-zinc-500 text-xs">{{ post.created_at.strftime('%m/%d') }}</span>
          </div>
        </a>
        {% endfor %}
      </div>
    </div>
    {% endif %}
  </div>

</div>

<script>
function copyReferralLink() {
  const url = document.getElementById('referralUrl').textContent;
  navigator.clipboard.writeText(url).then(() => {
    showToast('ì´ˆëŒ€ ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!', 'success');
  });
}
</script>

{% endblock %}