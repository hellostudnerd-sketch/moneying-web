{% extends "base.html" %}
{% block title %}ë‚´ ë§í¬ìš”ì²­ - MONEYING{% endblock %}

{% block content %}

<div class="max-w-4xl mx-auto">

  <div class="mb-6">
    <a href="javascript:history.back()" class="text-zinc-500 hover:text-white transition text-sm">â† ë’¤ë¡œê°€ê¸°</a>
    <h1 class="text-2xl font-black mt-2">ë‚´ ë§í¬ìš”ì²­</h1>
    <p class="text-zinc-400 mt-1 text-sm">ì´ {{ requests|length }}ê±´</p>
  </div>

  {% if request.args.get('success') %}
  <div class="bg-green-500/20 border border-green-500/30 rounded-xl p-4 mb-6 flex items-center gap-3">
    <span class="text-2xl">âœ…</span>
    <div>
      <div class="text-green-400 font-bold">ìš”ì²­ ì™„ë£Œ!</div>
      <div class="text-green-400/70 text-sm">1~3ì¼ ë‚´ì— ì¿ íŒ¡ ë§í¬ê°€ ë“±ë¡ë©ë‹ˆë‹¤.</div>
    </div>
  </div>
  {% endif %}
  
  {% if requests|length == 0 %}
  <div class="bg-zinc-900/60 border border-zinc-800 rounded-2xl p-10 text-center">
    <div class="text-4xl mb-4">ğŸ”—</div>
    <div class="text-zinc-400 font-bold mb-4">ì•„ì§ ìš”ì²­ ë‚´ì—­ì´ ì—†ì–´ìš”</div>
    <a href="/link-requests" class="inline-block bg-[#c4ff00] text-black font-bold px-6 py-3 rounded-xl hover:bg-white transition">
      ë§í¬ìš”ì²­ í•˜ëŸ¬ê°€ê¸°
    </a>
  </div>
  {% else %}
  
  <div class="space-y-3">
    {% for req in requests %}
    <div class="bg-zinc-900/60 border border-zinc-800 rounded-xl p-4 hover:border-zinc-700 transition">
      <div class="flex items-start justify-between gap-3">
        <div class="flex-1 min-w-0">
          <h3 class="text-white font-bold truncate">{{ req.title }}</h3>
          <a href="{{ req.original_url }}" target="_blank" class="text-zinc-500 text-xs hover:text-zinc-400 truncate block">{{ req.original_url[:50] }}{% if req.original_url|length > 50 %}...{% endif %}</a>
          <div class="text-zinc-500 text-xs mt-2">{{ req.created_at.strftime('%Y.%m.%d %H:%M') }}</div>
        </div>
        <div class="shrink-0">
          {% if req.coupang_url %}
          <span class="inline-block px-3 py-1 rounded-full bg-green-500/20 text-green-400 text-xs font-bold">ì™„ë£Œ</span>
          {% else %}
          <span class="inline-block px-3 py-1 rounded-full bg-zinc-700 text-zinc-400 text-xs font-bold">ëŒ€ê¸°ì¤‘</span>
          {% endif %}
        </div>
      </div>
      
      {% if req.coupang_url %}
      <div class="mt-3 pt-3 border-t border-zinc-800">
        <div class="text-xs text-zinc-500 mb-1">ì¿ íŒ¡ ë§í¬</div>
        <a href="{{ req.coupang_url }}" target="_blank" class="text-[#c4ff00] text-sm hover:underline break-all">{{ req.coupang_url[:60] }}{% if req.coupang_url|length > 60 %}...{% endif %}</a>
      </div>
      {% endif %}
    </div>
    {% endfor %}
  </div>
  
  {% endif %}

  <div class="mt-6">
    <a href="/link-requests" class="block w-full bg-[#c4ff00] text-black font-bold py-4 rounded-xl text-center hover:bg-white transition">
      ìƒˆ ë§í¬ìš”ì²­
    </a>
  </div>

</div>

{% endblock %}
