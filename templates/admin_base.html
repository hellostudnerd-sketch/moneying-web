{% extends "base.html" %}
{% block title %}ê´€ë¦¬ì{% if self.page_title() %} - {{ self.page_title() }}{% endif %}{% endblock %}
{% block main_class %}max-w-7xl mx-auto px-4 md:px-6 pt-20 md:pt-28 pb-20{% endblock %}
{% block content %}

{% block head_extra %}
<style>
  /* ê´€ë¦¬ì íƒ­ ê°€ë¡œ ìŠ¤í¬ë¡¤ - ìŠ¤í¬ë¡¤ë°” ìˆ¨ê¹€ */
  .admin-tabs {
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
    -ms-overflow-style: none;
  }
  .admin-tabs::-webkit-scrollbar { display: none; }
  
  /* ëª¨ë°”ì¼ì—ì„œ íƒ­ í˜ì´ë“œ íŒíŠ¸ (ìš°ì¸¡ ë” ìˆìŒ í‘œì‹œ) */
  .admin-tabs-wrap {
    position: relative;
  }
  .admin-tabs-wrap::after {
    content: '';
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    width: 40px;
    background: linear-gradient(to right, transparent, rgba(0,0,0,0.9));
    pointer-events: none;
    z-index: 1;
    opacity: 1;
    transition: opacity 0.3s;
  }
  .admin-tabs-wrap.scrolled-end::after {
    opacity: 0;
  }
  @media (min-width: 768px) {
    .admin-tabs-wrap::after { display: none; }
  }
</style>
{% endblock %}

  <!-- âœ… ê´€ë¦¬ì í—¤ë” -->
  <div class="flex flex-col md:flex-row md:items-end md:justify-between gap-3 md:gap-4 mb-4 md:mb-6">
    <div>
      <h1 class="text-2xl md:text-4xl font-black">{% block page_title %}{% endblock %}</h1>
      <p class="text-zinc-400 text-sm md:text-base mt-1 md:mt-2">{% block page_desc %}{% endblock %}</p>
    </div>
    <!-- âœ… ìš°ì¸¡ ì•¡ì…˜ -->
    <div class="shrink-0 flex flex-wrap gap-2 justify-start md:justify-end">
      {% block page_actions %}{% endblock %}
    </div>
  </div>

  <!-- âœ… ê´€ë¦¬ì ì „ìš© ë„¤ë¹„(íƒ­) - ëª¨ë°”ì¼ ê°€ë¡œ ìŠ¤í¬ë¡¤ -->
  <div class="admin-tabs-wrap mb-6 md:mb-8">
    <div class="admin-tabs flex gap-2 overflow-x-auto pb-2 md:pb-0 md:flex-wrap">
      <a href="/admin"
         class="shrink-0 px-3 md:px-4 py-2 rounded-xl transition font-bold text-xs md:text-sm whitespace-nowrap
                {% if request.path == '/admin' %}bg-[#a3e635] text-black border border-[#a3e635]{% else %}bg-zinc-900/60 text-gray-200 border border-zinc-800 hover:bg-zinc-800{% endif %}">
        ğŸ  í™ˆ
      </a>
      <a href="/admin/stats"
         class="shrink-0 px-3 md:px-4 py-2 rounded-xl transition font-bold text-xs md:text-sm whitespace-nowrap
                {% if request.path.startswith('/admin/stats') %}bg-[#a3e635] text-black border border-[#a3e635]{% else %}bg-zinc-900/60 text-gray-200 border border-zinc-800 hover:bg-zinc-800{% endif %}">
        ğŸ“Š í†µê³„
      </a>
      <a href="/admin/users"
         class="shrink-0 px-3 md:px-4 py-2 rounded-xl transition font-bold text-xs md:text-sm whitespace-nowrap
                {% if request.path.startswith('/admin/users') %}bg-[#a3e635] text-black border border-[#a3e635]{% else %}bg-zinc-900/60 text-gray-200 border border-zinc-800 hover:bg-zinc-800{% endif %}">
        ğŸ‘¤ ê°€ì…ì
      </a>
      <a href="/admin/subscriptions"
         class="shrink-0 px-3 md:px-4 py-2 rounded-xl transition font-bold text-xs md:text-sm whitespace-nowrap
                {% if request.path.startswith('/admin/subscriptions') %}bg-[#a3e635] text-black border border-[#a3e635]{% else %}bg-zinc-900/60 text-gray-200 border border-zinc-800 hover:bg-zinc-800{% endif %}">
        ğŸ’³ êµ¬ë…
      </a>
      <a href="/admin/gallery"
         class="shrink-0 px-3 md:px-4 py-2 rounded-xl transition font-bold text-xs md:text-sm whitespace-nowrap
                {% if request.path.startswith('/admin/gallery') or request.path.startswith('/admin/posts') or request.path.startswith('/admin/upload') %}bg-[#a3e635] text-black border border-[#a3e635]{% else %}bg-zinc-900/60 text-gray-200 border border-zinc-800 hover:bg-zinc-800{% endif %}">
        ê°¤ëŸ¬ë¦¬
      </a>
      <a href="/admin/link-requests"
         class="shrink-0 px-3 md:px-4 py-2 rounded-xl transition font-bold text-xs md:text-sm whitespace-nowrap
                {% if request.path.startswith('/admin/link-requests') %}bg-[#a3e635] text-black border border-[#a3e635]{% else %}bg-zinc-900/60 text-gray-200 border border-zinc-800 hover:bg-zinc-800{% endif %}">
        ğŸ”— ë§í¬ìš”ì²­
      </a>
      <a href="/admin/revenue-proofs"
         class="shrink-0 px-3 md:px-4 py-2 rounded-xl transition font-bold text-xs md:text-sm whitespace-nowrap
                {% if request.path.startswith('/admin/revenue-proofs') %}bg-[#a3e635] text-black border border-[#a3e635]{% else %}bg-zinc-900/60 text-gray-200 border border-zinc-800 hover:bg-zinc-800{% endif %}">
        ğŸ’¸ ìˆ˜ìµì¸ì¦
      </a>
      <a href="/admin/store"
         class="shrink-0 px-3 md:px-4 py-2 rounded-xl transition font-bold text-xs md:text-sm whitespace-nowrap
                {% if request.path.startswith('/admin/store') %}bg-[#a3e635] text-black border border-[#a3e635]{% else %}bg-zinc-900/60 text-gray-200 border border-zinc-800 hover:bg-zinc-800{% endif %}">
        ğŸ›’ ìŠ¤í† ì–´
      </a>
    </div>
  </div>

  {% block content_admin %}{% endblock %}

<script>
// ê´€ë¦¬ì íƒ­ ìŠ¤í¬ë¡¤ ìƒíƒœ ê°ì§€ (ìš°ì¸¡ í˜ì´ë“œ íŒíŠ¸)
document.addEventListener('DOMContentLoaded', function() {
  var tabs = document.querySelector('.admin-tabs');
  var wrap = document.querySelector('.admin-tabs-wrap');
  if (!tabs || !wrap) return;
  
  function checkScroll() {
    var atEnd = tabs.scrollLeft + tabs.clientWidth >= tabs.scrollWidth - 10;
    if (atEnd) {
      wrap.classList.add('scrolled-end');
    } else {
      wrap.classList.remove('scrolled-end');
    }
  }
  
  tabs.addEventListener('scroll', checkScroll);
  checkScroll();
  
  // í˜„ì¬ í™œì„± íƒ­ìœ¼ë¡œ ìë™ ìŠ¤í¬ë¡¤
  var activeTab = tabs.querySelector('a[class*="bg-[#a3e635]"]');
  if (activeTab) {
    setTimeout(function() {
      activeTab.scrollIntoView({ inline: 'center', block: 'nearest', behavior: 'smooth' });
    }, 100);
  }
});
</script>

{% endblock %}
