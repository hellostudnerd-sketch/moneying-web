{% extends "base.html" %}
{% block title %}ë‚´ì •ë³´ - MONEYING{% endblock %}

{% block content %}

<div class="max-w-xl mx-auto">

  <!-- í”„ë¡œí•„ ì¹´ë“œ -->
<div class="bg-zinc-900/60 border border-zinc-800 rounded-2xl p-5 mb-4">
  <div class="flex items-center gap-4">
    <div class="w-14 h-14 bg-gradient-to-br from-[#c4ff00]/20 to-zinc-800 rounded-full flex items-center justify-center text-2xl shrink-0">
      {% if user_is_seller %}ğŸª{% elif session.get("is_trial") %}ğŸ{% elif subscriptions and subscriptions|length > 0 %}â­{% else %}ğŸ‘¤{% endif %}
    </div>
    <div class="flex-1 min-w-0">
      <!-- ë‹‰ë„¤ì„ + ë³€ê²½ ë²„íŠ¼ -->
      <div class="flex items-center gap-2">
        <div class="font-bold text-lg truncate">{{ get_nickname(user_email) }}</div>
        <a href="/my/nickname" class="text-zinc-500 hover:text-white transition" title="ë‹‰ë„¤ì„ ë³€ê²½">
          <i class="fas fa-pen text-xs"></i>
        </a>
      </div>
      <div class="text-zinc-500 text-xs truncate">{{ user_email or "unknown" }}</div>
      <div class="flex flex-wrap gap-2 mt-1">
        {% if user_is_seller %}
          <span class="px-2 py-0.5 rounded-full bg-orange-500/20 text-orange-400 text-xs font-bold">ğŸª íŒë§¤ì</span>
        {% endif %}
        {% if session.get("is_trial") %}
          <span class="px-2 py-0.5 rounded-full bg-[#c4ff00]/20 text-[#c4ff00] text-xs font-bold">ğŸ ì²´í—˜ì¤‘</span>
        {% elif subscriptions and subscriptions|length > 0 %}
          <span class="px-2 py-0.5 rounded-full bg-[#c4ff00]/20 text-[#c4ff00] text-xs font-bold">â­ êµ¬ë…ì¤‘</span>
        {% else %}
          <span class="px-2 py-0.5 rounded-full bg-zinc-700 text-zinc-400 text-xs font-bold">ì¼ë°˜íšŒì›</span>
        {% endif %}
      </div>
    </div>
  </div>
  <div class="flex gap-3 mt-4 pt-4 border-t border-zinc-800 text-sm">
    <a href="/change-password" class="text-zinc-400 hover:text-white transition">ë¹„ë°€ë²ˆí˜¸ ë³€ê²½</a>
    <span class="text-zinc-700">|</span>
    <a href="/logout" class="text-zinc-400 hover:text-white transition">ë¡œê·¸ì•„ì›ƒ</a>
  </div>
</div>

  <!-- ë‚˜ì˜ êµ¬ë… -->
  <div class="bg-zinc-900/60 border border-zinc-800 rounded-2xl mb-4 overflow-hidden">
    <div class="px-5 py-3 border-b border-zinc-800">
      <span class="font-bold text-sm">ë‚˜ì˜ êµ¬ë…</span>
    </div>
    
    <!-- êµ¬ë… ìƒíƒœ ìš”ì•½ -->
    <a href="/pricing" class="flex items-center justify-between px-5 py-4 hover:bg-zinc-800/50 transition border-b border-zinc-800/50">
      <div class="flex items-center gap-3">
        <span class="text-xl">ğŸ“¦</span>
        <div>
          <div class="font-medium text-white text-sm">êµ¬ë… ê´€ë¦¬</div>
          <div class="text-zinc-500 text-xs">
            {% if session.get("is_trial") %}
              ì²´í—˜ì¤‘ Â· {% if trial_expires_at %}{{ trial_expires_at.strftime('%m/%d') }} ë§Œë£Œ{% endif %}
            {% elif subscriptions and subscriptions|length > 0 %}
              {{ subscriptions|length }}ê°œ ì´ìš©ì¤‘
            {% else %}
              êµ¬ë… ì¤‘ì¸ ìƒí’ˆ ì—†ìŒ
            {% endif %}
          </div>
        </div>
      </div>
      <i class="fas fa-chevron-right text-zinc-600 text-sm"></i>
    </a>
    
    <!-- ë§í¬ìš”ì²­ -->
    <a href="/link-requests" class="flex items-center justify-between px-5 py-4 hover:bg-zinc-800/50 transition">
      <div class="flex items-center gap-3">
        <span class="text-xl">ğŸ”—</span>
        <div>
          <div class="font-medium text-white text-sm">ë§í¬ìš”ì²­</div>
          <div class="text-zinc-500 text-xs">ì´ë²ˆ ë‹¬ {{ monthly_used or 0 }}/{{ monthly_limit or 3 }}íšŒ ì‚¬ìš©</div>
        </div>
      </div>
      <i class="fas fa-chevron-right text-zinc-600 text-sm"></i>
    </a>
  </div>

  <!-- ë¹„êµ¬ë…ì/ì²´í—˜ì¤‘ì¼ ë•Œ CTA -->
  {% if not subscriptions or subscriptions|length == 0 %}
  <div class="bg-gradient-to-r from-[#c4ff00]/10 to-purple-500/10 border border-[#c4ff00]/30 rounded-2xl p-5 mb-4">
    <div class="text-center">
      {% if session.get("is_trial") %}
        <div class="text-lg font-bold text-white mb-1">ì²´í—˜ ê¸°ê°„ì´ ê³§ ëë‚˜ìš”!</div>
        <div class="text-zinc-400 text-sm mb-4">êµ¬ë…í•˜ê³  ê³„ì† ì´ìš©í•˜ì„¸ìš”</div>
      {% elif can_use_trial %}
        <div class="text-lg font-bold text-white mb-1">3ì¼ ë¬´ë£Œì²´í—˜ í•´ë³´ì„¸ìš”!</div>
        <div class="text-zinc-400 text-sm mb-4">ê²°ì œ ì—†ì´ ëª¨ë“  ê¸°ëŠ¥ì„ ì²´í—˜</div>
      {% else %}
        <div class="text-lg font-bold text-white mb-1">êµ¬ë…í•˜ê³  ì‹œì‘í•˜ì„¸ìš”!</div>
        <div class="text-zinc-400 text-sm mb-4">ì˜ìƒ ì†ŒìŠ¤ + ì¿ íŒ¡ ë§í¬ ë¬´ì œí•œ</div>
      {% endif %}
      <div class="flex gap-3">
        {% if can_use_trial and not session.get("is_trial") %}
          <a href="/free-trial" class="flex-1 py-3 rounded-xl font-bold border border-zinc-600 text-white hover:bg-zinc-800 transition text-center text-sm">ğŸ ë¬´ë£Œì²´í—˜</a>
        {% endif %}
        <a href="/pricing" class="flex-1 py-3 rounded-xl font-bold bg-[#c4ff00] text-black hover:bg-white transition text-center text-sm">êµ¬ë…í•˜ê¸°</a>
      </div>
    </div>
  </div>
  {% endif %}

  <!-- ë‚˜ì˜ í™œë™ -->
  <div class="bg-zinc-900/60 border border-zinc-800 rounded-2xl mb-4 overflow-hidden">
    <div class="px-5 py-3 border-b border-zinc-800">
      <span class="font-bold text-sm">ë‚˜ì˜ í™œë™</span>
    </div>
    
    <!-- ë‚´ê°€ ì“´ ê¸€ -->
    <a href="/my/posts" class="flex items-center justify-between px-5 py-4 hover:bg-zinc-800/50 transition border-b border-zinc-800/50">
      <div class="flex items-center gap-3">
        <span class="text-xl">âœï¸</span>
        <div>
          <div class="font-medium text-white text-sm">ë‚´ê°€ ì“´ ê¸€</div>
          <div class="text-zinc-500 text-xs">{{ my_posts_count or 0 }}ê°œ</div>
        </div>
      </div>
      <i class="fas fa-chevron-right text-zinc-600 text-sm"></i>
    </a>
    
    <!-- ë¦¬ì›Œë“œ -->
    <a href="/my/rewards" class="flex items-center justify-between px-5 py-4 hover:bg-zinc-800/50 transition">
      <div class="flex items-center gap-3">
        <span class="text-xl">ğŸ</span>
        <div>
          <div class="font-medium text-white text-sm">ë¦¬ì›Œë“œ</div>
          <div class="text-zinc-500 text-xs">ì¹œêµ¬ì´ˆëŒ€ {{ invited_count or 0 }}ëª… Â· ìˆ˜ìµì¸ì¦</div>
        </div>
      </div>
      <i class="fas fa-chevron-right text-zinc-600 text-sm"></i>
    </a>
  </div>

  <!-- íŒë§¤ì ì„¹ì…˜ (íŒë§¤ìë§Œ) -->
  {% if user_is_seller %}
  <div class="bg-zinc-900/60 border border-zinc-800 rounded-2xl mb-4 overflow-hidden">
    <div class="px-5 py-3 border-b border-zinc-800">
      <span class="font-bold text-sm">íŒë§¤ì</span>
    </div>
    
    <a href="/my/deals" class="flex items-center justify-between px-5 py-4 hover:bg-zinc-800/50 transition border-b border-zinc-800/50">
      <div class="flex items-center gap-3">
        <span class="text-xl">ğŸ›ï¸</span>
        <div>
          <div class="font-medium text-white text-sm">ê³µêµ¬/í˜‘ì°¬ ê´€ë¦¬</div>
          <div class="text-zinc-500 text-xs">ì‹ ì²­ í˜„í™© í™•ì¸</div>
        </div>
      </div>
      <i class="fas fa-chevron-right text-zinc-600 text-sm"></i>
    </a>
    
    <a href="/seller/dashboard" class="flex items-center justify-between px-5 py-4 hover:bg-zinc-800/50 transition">
      <div class="flex items-center gap-3">
        <span class="text-xl">ğŸ“Š</span>
        <div>
          <div class="font-medium text-white text-sm">íŒë§¤ì ëŒ€ì‹œë³´ë“œ</div>
          <div class="text-zinc-500 text-xs">{{ user_seller_company or 'ë‚´ ì—…ì²´' }}</div>
        </div>
      </div>
      <i class="fas fa-chevron-right text-zinc-600 text-sm"></i>
    </a>
  </div>
  
  {% elif user_seller_status == 'pending' %}
  <div class="bg-zinc-900/60 border border-zinc-800 rounded-2xl mb-4 p-5">
    <div class="flex items-center justify-between">
      <div class="flex items-center gap-3">
        <span class="text-xl">ğŸª</span>
        <div>
          <div class="font-medium text-white text-sm">íŒë§¤ì ì‹ ì²­ ì¤‘</div>
          <div class="text-zinc-500 text-xs">1~2ì¼ ë‚´ ê²€í†  í›„ ì•ˆë‚´</div>
        </div>
      </div>
      <span class="px-2 py-1 rounded-full bg-yellow-500/20 text-yellow-400 text-xs font-bold">ëŒ€ê¸°ì¤‘</span>
    </div>
  </div>
  
  {% else %}
  <div class="bg-zinc-900/60 border border-zinc-800 rounded-2xl mb-4 overflow-hidden">
    <a href="/seller/apply" class="flex items-center justify-between px-5 py-4 hover:bg-zinc-800/50 transition">
      <div class="flex items-center gap-3">
        <span class="text-xl">ğŸª</span>
        <div>
          <div class="font-medium text-white text-sm">íŒë§¤ì ì „í™˜</div>
          <div class="text-zinc-500 text-xs">ì§ì ‘ ì˜ìƒ ì˜¬ë¦¬ê³  í¬ë¦¬ì—ì´í„°ì—ê²Œ ë…¸ì¶œ</div>
        </div>
      </div>
      <i class="fas fa-chevron-right text-zinc-600 text-sm"></i>
    </a>
  </div>
  {% endif %}

  <!-- ê¸°íƒ€ -->
  <div class="bg-zinc-900/60 border border-zinc-800 rounded-2xl mb-6 overflow-hidden">
    <div class="px-5 py-3 border-b border-zinc-800">
      <span class="font-bold text-sm">ê¸°íƒ€</span>
    </div>
    
    <a href="/my/payments" class="flex items-center justify-between px-5 py-4 hover:bg-zinc-800/50 transition border-b border-zinc-800/50">
      <div class="flex items-center gap-3">
        <span class="text-xl">ğŸ’³</span>
        <div>
          <div class="font-medium text-white text-sm">ê²°ì œ ë‚´ì—­</div>
          <div class="text-zinc-500 text-xs">êµ¬ë§¤ ë° í™˜ë¶ˆ ë‚´ì—­</div>
        </div>
      </div>
      <i class="fas fa-chevron-right text-zinc-600 text-sm"></i>
    </a>
    
    <a href="/support" class="flex items-center justify-between px-5 py-4 hover:bg-zinc-800/50 transition">
      <div class="flex items-center gap-3">
        <span class="text-xl">ğŸ’¬</span>
        <div>
          <div class="font-medium text-white text-sm">ê³ ê°ì„¼í„°</div>
          <div class="text-zinc-500 text-xs">ë¬¸ì˜ ë° ë„ì›€ë§</div>
        </div>
      </div>
      <i class="fas fa-chevron-right text-zinc-600 text-sm"></i>
    </a>
  </div>

  <a href="/" class="block w-full bg-zinc-800 hover:bg-zinc-700 text-white font-bold py-4 rounded-xl text-center transition text-sm">ë©”ì¸ìœ¼ë¡œ</a>

</div>

{% endblock %}