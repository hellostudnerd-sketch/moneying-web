{% extends "base.html" %}
{% block title %}ë‚´ ê³µêµ¬/í˜‘ì°¬ ê´€ë¦¬ - MONEYING{% endblock %}

{% block content %}

<div class="max-w-4xl mx-auto">

  <div class="mb-8">
    <a href="/my" class="text-zinc-500 hover:text-white transition text-sm">â† ë‚´ì •ë³´ë¡œ ëŒì•„ê°€ê¸°</a>
    <h1 class="text-2xl md:text-3xl font-black mt-4">ë‚´ ê³µêµ¬/í˜‘ì°¬ <span class="text-[#c4ff00]">ê´€ë¦¬</span></h1>
    <p class="text-zinc-400 mt-2">ë‚´ê°€ ë“±ë¡í•œ ê³µêµ¬/í˜‘ì°¬ ê¸€ê³¼ ì‹ ì²­ í˜„í™©</p>
  </div>

  {% if posts|length == 0 %}
  <div class="bg-zinc-900/60 border border-zinc-800 rounded-2xl p-10 text-center">
    <div class="text-5xl mb-4">ğŸ›ï¸</div>
    <div class="text-zinc-400 font-bold mb-4">ë“±ë¡í•œ ê³µêµ¬/í˜‘ì°¬ì´ ì—†ìŠµë‹ˆë‹¤</div>
    <a href="/community/write?category=deal" class="inline-block bg-[#c4ff00] text-black font-bold px-6 py-3 rounded-xl hover:bg-white transition">
      ê³µêµ¬/í˜‘ì°¬ ë“±ë¡í•˜ê¸°
    </a>
  </div>
  {% else %}
  
  <div class="space-y-4">
    {% for post in posts %}
    <div class="bg-zinc-900/60 border border-zinc-800 rounded-2xl p-5 hover:border-zinc-700 transition">
      <div class="flex flex-col md:flex-row md:items-center justify-between gap-4">
        
        <div class="flex-1 min-w-0">
          <div class="flex items-center gap-2 mb-2">
            {% if post.deal_closed %}
              <span class="px-2 py-1 rounded text-xs font-bold bg-zinc-700 text-zinc-400">ë§ˆê°</span>
            {% elif post.deal_deadline and post.deal_deadline < now %}
              <span class="px-2 py-1 rounded text-xs font-bold bg-red-500/20 text-red-400">ê¸°ê°„ ë§Œë£Œ</span>
            {% else %}
              <span class="px-2 py-1 rounded text-xs font-bold bg-green-500/20 text-green-400">ì§„í–‰ì¤‘</span>
            {% endif %}
            
            {% if post.deal_subscribers_only %}
              <span class="px-2 py-1 rounded text-xs font-bold bg-purple-500/20 text-purple-400">êµ¬ë…ì ì „ìš©</span>
            {% endif %}
          </div>
          
          <h3 class="text-lg font-bold text-white truncate">{{ post.title }}</h3>
          
          <div class="flex items-center gap-4 mt-2 text-sm text-zinc-500">
            <span>{{ post.created_at.strftime('%Y-%m-%d') }}</span>
            {% if post.deal_deadline %}
              <span>ë§ˆê°: {{ post.deal_deadline.strftime('%m/%d %H:%M') }}</span>
            {% endif %}
            {% if post.deal_max_people %}
              <span>ì •ì›: {{ post.deal_max_people }}ëª…</span>
            {% endif %}
          </div>
        </div>
        
        <div class="flex items-center gap-3">
          <div class="text-center px-4">
            <div class="text-2xl font-black text-[#c4ff00]">{{ post.applications|length }}</div>
            <div class="text-xs text-zinc-500">ì‹ ì²­</div>
          </div>
          
          <a href="/my/deals/{{ post.id }}" class="px-4 py-2 bg-[#c4ff00] text-black font-bold rounded-lg hover:bg-white transition text-sm">
            ê´€ë¦¬í•˜ê¸°
          </a>
        </div>
        
      </div>
    </div>
    {% endfor %}
  </div>
  
  {% endif %}

</div>

{% endblock %}